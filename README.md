# CCSDS MO XML to Async API YAML
- Convert CCSDS MO XML specification files into AsyncAPI YAML document.
- XML files are located in the [xml-ccsds-mo-prototypes](/xml-ccsds-mo-prototypes/) directory.
- AsyncAPI docs are hosted [here](https://tanagraspace.github.io/ccsds-mo-to-asyncapi/).

## Generate Everything
```shell
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
pytest gencode
pytest genyaml
./01_generate_code.sh
./02_generate_yaml.sh
./03_generate_docs.sh
```

Or do it all in one go:
```shell
./generate_all.sh
```

## Technical Notes
- Executing `03_generate_docs.sh` requires `sudo` privileges as it involves changing ownership of files generated by Docker.
- The generated code will be located in the _mo-asyncapi/src_ folder. This code is used to generate the AsyncAPI YAML definitions.

## Scope
- The MO MAL XML definitions that are processed to generate code are listed in [this bash script](/01_generate_code.sh), they are:
  - MAL v003
  - COM v001
  - Mission and Control v002
- The MO MAL XML definitions that are processed to generate YAML AsyncAPI service definitions are listed in [this bash script](/02_generate_yaml.sh), they are:
  - Mission and Control v002
- The following MAL interaction types are supported: [PubSub](/genyaml/src/generators/yaml_generator_pubsub.py), [Request](/genyaml/src/generators/yaml_generator_request.py), [Submit](/genyaml/src/generators/yaml_generator_submit.py), and [Progress](/genyaml/src/generators/yaml_generator_progress.py)
- The Invoke interaction types is **NOT** currently supported.

## Interaction Type YAML Generators
- Each interaction type has its own AsyncAPY YAML generator implementation, [here](/genyaml/src/generators/).
- The interaction type YAML generators to use are included in a list of generator instances in [this main function](/genyaml/src/generate_yaml.py).