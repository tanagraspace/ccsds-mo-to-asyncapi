asyncapi: 3.0.0
info:
  title: Statistic Service enableReporting API
  version: 1.0.0
  description: This API allows clients to interact with the enableReporting interaction of the Statistic Service.
defaultContentType: application/json
servers:
  production:
    host: 'localhost:{port}'
    protocol: mqtt
    description: MQTT server for the Statistic Service's enableReporting interaction.
    variables:
      port:
        default: '8883'
channels:
  submit_Statistic_enableReporting:
    address: submit_Statistic_enableReporting
    messages:
      Statistic.enableReporting_submit.message:
        $ref: '#/components/messages/Statistic_enableReporting_submit'
    description: >
      Send a **Statistic_enableReporting_submit** message in this channel to receive a
      **Statistic_enableReporting_None** message over the **None_Statistic_enableReporting** channel.
  error_Statistic_enableReporting:
    address: error_Statistic_enableReporting
    messages:
      Statistic.enableReporting_error.message:
        $ref: '#/components/messages/Statistic_enableReporting_error'
    description: >
      Use this channel to receive Statistic enableReporting errors as **Statistic_enableReporting_NoneErrors**
      messages.
operations:
  Statistic_enableReporting_submit:
    action: send
    channel:
      $ref: '#/channels/submit_Statistic_enableReporting'
    messages:
      - $ref: '#/channels/submit_Statistic_enableReporting/messages/Statistic.enableReporting_submit.message'
  Statistic_enableReporting_error:
    action: receive
    channel:
      $ref: '#/channels/error_Statistic_enableReporting'
    messages:
      - $ref: '#/channels/error_Statistic_enableReporting/messages/Statistic.enableReporting_error.message'
components:
  schemas:
    Statistic_enableReporting_submit:
      type: object
      properties:
        sequenceId:
          type: string
          description: A unique identifier to map the response (receive message) to the request (send message). If no request message exists then this unique identifier can be used to track the sequence order of the received messages.
        isGroupIds:
          type: boolean
          description: |
            If the isGroupIds field is TRUE then the enableInstances field shall contain GroupIdentity object instance identifiers, otherwise the field contains StatisticFunction object instance identifiers.
            If the isGroupIds field is TRUE, the requested Group, or the Group objects referenced by that Group, must contain StatisticLink objects otherwise an INVALID error shall be returned.
            The StatisticLink objects referenced, either indirectly via StatisticFunction objects or indirectly via groups, by the enableInstances field shall be the StatisticLink objects to match.
            The id of the enableInstances field shall support the wildcard value of '0' and matches all StatisticLink objects of the provider.
            The service provider shall check for the wildcard value in the list of object instance identifiers in the enableInstances field first and if found no other checks of supplied object instance identifiers shall be made.
            If the enableInstances field contains a value of TRUE then reports after the reporting and collection intervals for matching StatisticLink objects shall be generated, a value of FALSE requests that reports will not be generated.
            No error shall be raised if the enableInstances Boolean value supplied is the same as the current reportingEnabled field for a StatisticLink object i.e. enabling an already enabled link will not result in an error.
            If a requested StatisticFunction or GroupIdentity object is unknown then an UNKNOWN error shall be returned.
            If an error is raised then no modifications shall be made as a result of this operation call.
            The provider should create and store a new StatisticLinkDefinition object in the COM archive if the reportingEnabled field is changed.
        enableInstances:
          $ref: '#/components/schemas/com/InstanceBooleanPair'
          description: |
            If the generation of reports is being enabled, then the provider shall generate a report immediately and start the report interval from that report.
    Statistic_enableReporting_error:
      type: object
      properties:
        sequenceId:
          type: string
          description: A unique identifier to map the response (receive message) to the request (send message). If no request message exists then this unique identifier can be used to track the sequence order of the received messages.
        area:
          type: string
          description: The area in which the error applies.
          enum:
            - MAL
            - COM
        name:
          type: string
          description: A code representing the error.
          enum:
            - UNKNOWN
            - INVALID
        extraInformation:
          type: array
          items:
            type: integer
            format: uint32
            description: A list of the indexes of the error values shall be contained in the extra information field.
    com:
      InstanceBooleanPair:
        properties:
          id:
            description: The object instance identifier.
            format: int64
            type: integer
          value:
            description: An associated Boolean value.
            type: boolean
        type: object
  messages:
    Statistic_enableReporting_submit:
      description: Statistic enableReporting request submission
      payload:
        $ref: '#/components/schemas/Statistic_enableReporting_submit'
    Statistic_enableReporting_error:
      description: Statistic enableReporting error response
      payload:
        $ref: '#/components/schemas/Statistic_enableReporting_error'
