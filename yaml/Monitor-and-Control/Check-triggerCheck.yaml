asyncapi: 3.0.0
info:
  title: Check Service triggerCheck API
  version: 1.0.0
  description: This API allows clients to interact with the triggerCheck interaction of the Check Service.
defaultContentType: application/json
servers:
  production:
    host: 'localhost:{port}'
    protocol: mqtt
    description: MQTT server for the Check Service's triggerCheck interaction.
    variables:
      port:
        default: '8883'
channels:
  submit_Check_triggerCheck:
    address: submit_Check_triggerCheck
    messages:
      Check.triggerCheck_submit.message:
        $ref: '#/components/messages/Check_triggerCheck_submit'
    description: >
      Send a **Check_triggerCheck_submit** message in this channel to receive a
      **Check_triggerCheck_None** message over the **None_Check_triggerCheck** channel.
  error_Check_triggerCheck:
    address: error_Check_triggerCheck
    messages:
      Check.triggerCheck_error.message:
        $ref: '#/components/messages/Check_triggerCheck_error'
    description: >
      Use this channel to receive Check triggerCheck errors as **Check_triggerCheck_NoneErrors**
      messages.
operations:
  Check_triggerCheck_submit:
    action: send
    channel:
      $ref: '#/channels/submit_Check_triggerCheck'
    messages:
      - $ref: '#/channels/submit_Check_triggerCheck/messages/Check.triggerCheck_submit.message'
  Check_triggerCheck_error:
    action: receive
    channel:
      $ref: '#/channels/error_Check_triggerCheck'
    messages:
      - $ref: '#/channels/error_Check_triggerCheck/messages/Check.triggerCheck_error.message'
components:
  schemas:
    Check_triggerCheck_submit:
      type: object
      properties:
        transactionId:
          type: string
          description: A unique identifier to map the response (receive message) to the request (send message). If no request message exists then this unique identifier can be used to track the sequence order of the received messages.
        checkObjInstIds:
          type: array
          items:
            type: integer
            format: int64
          description: |
            The checkObjInstIds field shall hold a list of CheckIdentity object instance identifiers to trigger the evaluation of all linked checks.
        linkObjInstIds:
          type: array
          items:
            type: integer
            format: int64
          description: |
            The linkObjInstIds field shall hold a list of CheckLink object instance identifiers to trigger the evaluation of.
            The wildcard value of '0' shall be permitted in either list.
            The wildcard value should be checked for first, if found no other checks of supplied object instance identifiers shall be made.
            If a requested CheckIdentity or CheckLink object is unknown then an UNKNOWN error shall be returned.
            If an error is raised then no evaluations shall be made as a result of this operation call.
            Either list may be empty in which case filtering on that aspect, check identity or specific check link, shall be ignored.
            The two lists shall be combined using 'OR' logic, where a CheckLink is evaluated if the identity of a check is in the first list or if the link is directly listed in the second list.
            Triggering a check shall ignore the nominalTime, nominalCount, violationTime and violationCount fields and requests an immediate evaluation of the checks.
            Triggering a check during a periodic check shall not influence the periodic check (e.g. it does not reset the checkInterval timer, the successive valid samples that passed/violated the check or the maxReportingInterval timer).
    Check_triggerCheck_error:
      type: object
      properties:
        transactionId:
          type: string
          description: A unique identifier to map the response (receive message) to the request (send message). If no request message exists then this unique identifier can be used to track the sequence order of the received messages.
        area:
          type: string
          description: The area in which the error applies.
          enum:
            - MAL
        name:
          type: string
          description: A code representing the error.
          enum:
            - UNKNOWN
        extraInformation:
          type: array
          items:
            type: integer
            format: uint32
            description: A list of the indexes of the error values shall be contained in the extra information field.
  messages:
    Check_triggerCheck_submit:
      description: Check triggerCheck request submission
      payload:
        $ref: '#/components/schemas/Check_triggerCheck_submit'
    Check_triggerCheck_error:
      description: Check triggerCheck error response
      payload:
        $ref: '#/components/schemas/Check_triggerCheck_error'
