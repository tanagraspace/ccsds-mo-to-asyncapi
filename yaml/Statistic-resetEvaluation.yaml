asyncapi: 3.0.0
info:
  title: Statistic Service resetEvaluation API
  version: 1.0.0
  description: This API allows clients to interact with the resetEvaluation iteraction of the Statistic Service.
defaultContentType: application/json
servers:
  production:
    host: 'localhost:{port}'
    protocol: mqtt
    description: MQTT server for the resetEvaluation interaction.
    variables:
      port:
        enum:
          - '8883'
          - '8884'
        default: '8883'
    bindings:
      mqtt:
        clientId: guest
        cleanSession: false
        keepAlive: 0
        lastWill:
          topic: /will
          qos: 0
          message: Guest gone offline.
          retain: false
channels:
  Send_Statistic_resetEvaluation:
    address: Send_Statistic_resetEvaluation
    messages:
      Statistic.resetEvaluation_Send.message:
        $ref: '#/components/messages/Statistic_resetEvaluation_Send'
    description: >
      Send a **Statistic_resetEvaluation_Send** message in this channel to receive a
      **Statistic_resetEvaluation_Receive** message over the **Receive_Statistic_resetEvaluation** channel.
  Receive_Statistic_resetEvaluation:
    address: Receive_Statistic_resetEvaluation
    messages:
      Statistic.resetEvaluation_Receive.message:
        $ref: '#/components/messages/Statistic_resetEvaluation_Receive'
    description: >
      Use this channel to receive Statistic resetEvaluation responses as **Statistic_resetEvaluation_Receive**
      messages.
  Error_Statistic_resetEvaluation:
    address: Error_Statistic_resetEvaluation
    messages:
      Statistic.resetEvaluation_Error.message:
        $ref: '#/components/messages/Statistic_resetEvaluation_Error'
    description: >
      Use this channel to receive Statistic resetEvaluation errors as **Statistic_resetEvaluation_ReceiveErrors**
      messages.
operations:
  Statistic_resetEvaluation_Send:
    action: send
    channel:
      $ref: '#/channels/Send_Statistic_resetEvaluation'
    messages:
      - $ref: '#/channels/Send_Statistic_resetEvaluation/messages/Statistic.resetEvaluation_Send.message'
  Statistic_resetEvaluation_Receive:
    action: receive
    channel:
      $ref: '#/channels/Receive_Statistic_resetEvaluation'
    messages:
      - $ref: '#/channels/Receive_Statistic_resetEvaluation/messages/Statistic.resetEvaluation_Receive.message'
  Statistic_resetEvaluation_Error:
    action: receive
    channel:
      $ref: '#/channels/Error_Statistic_resetEvaluation'
    messages:
      - $ref: '#/channels/Error_Statistic_resetEvaluation/messages/Statistic.resetEvaluation_Error.message'
components:
  schemas:
    Statistic_resetEvaluation_Send:
      type: object
      properties:
        transactionId:
          type: string
          description: A unique identifier to map the response to the request.
        isStatLinkGroup:
          type: boolean
          description: |
            If the isStatLinkGroup field is TRUE then the objInstIds field shall contain GroupIdentity object instance identifiers, otherwise the field shall contain StatisticFunction object instance identifiers.
            If the isStatLinkGroup field is TRUE, the requested Group, or the Group objects referenced by that Group, must contain StatisticLink objects otherwise an INVALID error shall be returned.
            The StatisticLink objects referenced, either indirectly via statistic functions or indirectly via groups, by the objInstIds field shall be the StatisticLink objects to match.
        objInstIds:
          type: integer
          description: |
            The objInstIds field shall support the wildcard value of '0' and matches all StatisticLink objects of the provider.
            The wildcard value should be checked for first, if found no other checks of supplied object instance identifiers shall be made.
            If a requested function or group is unknown then an UNKNOWN error shall be returned.
          format: int64
        returnLatestEval:
          type: boolean
          description: |
            If the returnLatestEval Boolean field is TRUE then the latest evaluation result for each of the matched links shall be returned before resetting, otherwise a NULL is returned.
            If an error is raised then no resetting of evaluations shall be made as a result of this operation call.
    Statistic_resetEvaluation_Receive:
      type: object
      properties:
        transactionId:
          type: string
          description: A unique identifier to map the response to the request.
        evaluations:
          $ref: '#/components/schemas/mc/statistic/StatisticEvaluationReport'
    Statistic_resetEvaluation_Error:
      type: object
      properties:
        transactionId:
          type: string
          description: A unique identifier to map the response to the request.
        area:
          type: string
          description: The area in which the error applies.
          enum:
            - COM
            - MAL
        name:
          type: string
          description: A code representing the error.
          enum:
            - UNKNOWN
            - INVALID
        extraInformation:
          type: array
          items:
            type: integer
            format: uint32
            description: A list of the indexes of the erroneous values from the originating list supplied or request list.
    mc:
      statistic:
        StatisticEvaluationReport:
          properties:
            linkId:
              description: The statistic link object instance identifier.
              format: int64
              type: integer
            value:
              $ref: '#/components/schemas/mc/statistic/StatisticValue'
              description: The statistical evaluation value.
          type: object
        StatisticValue:
          properties:
            endTime:
              description: Time the statistic calculations ended. This value can be NULL if
                the time can be derived by other means, e.g., other times in a set of StatisticValue
                structures.
              format: uint64
              type: number
            paramDefInstId:
              description: The object instance identifier of the ParameterDefinition object
                used for the parameter.
              format: int64
              type: integer
            sampleCount:
              description: Holds the number of samples that contributed to the statistic value.
                For calculated values such as 'mean average' this holds the number of samples
                that were used to calculate the value, for non-calculated values such as 'min'
                then it is the number of samples that were in the set evaluated.
              format: uint32
              type: integer
            startTime:
              description: Time the statistic calculations started. This value can be NULL if
                the start time can be derived by other means, e.g., other start times in a set
                of StatisticValue structures.
              format: uint64
              type: number
            value:
              description: Value of the statistic.
              type: string
            valueTime:
              description: Time the statistic value was reached. The time is only applicable
                for particular statistic values such as min or max. Shall be NULL if not applicable
                for cases such as 'mean average'.
              format: uint64
              type: number
          type: object
  messages:
    Statistic_resetEvaluation_Send:
      description: Statistic resetEvaluation request submission
      payload:
        $ref: '#/components/schemas/Statistic_resetEvaluation_Send'
    Statistic_resetEvaluation_Receive:
      description: Statistic resetEvaluation update response
      payload:
        $ref: '#/components/schemas/Statistic_resetEvaluation_Receive'
    Statistic_resetEvaluation_Error:
      description: Statistic resetEvaluation error response
      payload:
        $ref: '#/components/schemas/Statistic_resetEvaluation_Error'
